# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Codex –∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—Ä–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É **AutoTrade**, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Domain-Driven Design –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–ª—é–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º.

## –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
new_autotrade/
‚îú‚îÄ‚îÄ domain/            # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ application/       # —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ infrastructure/    # –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îú‚îÄ‚îÄ config/            # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ binance_keys/      # API‚Äë–∫–ª—é—á–∏
‚îî‚îÄ‚îÄ tests/             # —Ç–µ—Å—Ç—ã pytest
```

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–∑ README —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```
### üìê Domain-Driven Design Structure (–†–µ–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞)

new_autotrade/
‚îÇ
‚îú‚îÄ‚îÄ domain/                    # üß† Business Logic
‚îÇ   ‚îú‚îÄ‚îÄ entities/              # Core business objects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deal.py           # Trading deals
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py          # Exchange orders
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency_pair.py  # Trading pairs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ticker.py         # Market tickers
‚îÇ   ‚îú‚îÄ‚îÄ factories/             # Object creation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deal_factory.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ order_factory.py
‚îÇ   ‚îî‚îÄ‚îÄ services/              # Business services
‚îÇ       ‚îú‚îÄ‚îÄ trading_service.py        # Core trading logic
‚îÇ       ‚îú‚îÄ‚îÄ deal_service.py           # Deal management
‚îÇ       ‚îú‚îÄ‚îÄ order_service.py          # Order management
‚îÇ       ‚îú‚îÄ‚îÄ signal_service.py         # Signal processing
‚îÇ       ‚îú‚îÄ‚îÄ ticker_service.py         # Market data
‚îÇ       ‚îú‚îÄ‚îÄ orderbook_analyzer.py     # üÜï OrderBook analysis
‚îÇ       ‚îú‚îÄ‚îÄ orderbook_service.py      # üÜï OrderBook monitoring
‚îÇ       ‚îú‚îÄ‚îÄ trading_decision_engine.py # üÜï Decision engine
‚îÇ       ‚îú‚îÄ‚îÄ market_analysis_service.py # Market analysis
‚îÇ       ‚îú‚îÄ‚îÄ cached_indicator_service.py # Performance optimization
‚îÇ       ‚îî‚îÄ‚îÄ signal_cooldown_manager.py # Protection system
‚îÇ
‚îú‚îÄ‚îÄ application/               # üöÄ Use Cases
‚îÇ   ‚îú‚îÄ‚îÄ use_cases/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ run_realtime_trading.py   # üÜï Real-time with OrderBook
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ performance_logger.py     # Performance monitoring
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/            # üîå External Integrations
‚îÇ   ‚îú‚îÄ‚îÄ repositories/          # Data storage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deals_repository.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders_repository.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tickers_repository.py
‚îÇ   ‚îî‚îÄ‚îÄ connectors/            # External services
‚îÇ       ‚îú‚îÄ‚îÄ exchange_connector.py     # Exchange API
‚îÇ       ‚îî‚îÄ‚îÄ pro_exchange_connector.py # üÜï WebSocket ccxt.pro
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.json            # Configuration file
‚îÇ
‚îú‚îÄ‚îÄ binance_keys/              # üîê API Keys storage
‚îÇ
‚îú‚îÄ‚îÄ project_management/        # Project docs & issues
‚îÇ
‚îú‚îÄ‚îÄ sandbox*.py                # Testing scripts
‚îú‚îÄ‚îÄ main.py                    # üéØ Application entry point
‚îî‚îÄ‚îÄ *.md                       # Documentation
```

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å .env –∏ –∫–ª—é—á–∏.** –§–∞–π–ª `.env.example` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —à–∞–±–ª–æ–Ω, —Ä–µ–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –≠—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤ issue:
```
- –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å backward compatibility –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Ç–µ–∫—É—â–µ–≥–æ config.json
- –î–æ–±–∞–≤–∏—Ç—å configuration schema –¥–ª—è IDE autocompletion
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å integration —Å external config management (Consul, etcd –≤ –±—É–¥—É—â–µ–º)
- –í–∞–∂–Ω–æ: never commit .env —Ñ–∞–π–ª—ã –≤ git, –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env.example
```
2. **–°–æ–±–ª—é–¥–∞–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—Ç–∏–ª—å.** –í README –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç—Å—è –≤–∞–∂–Ω–æ—Å—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
```
- üìä **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤**: MACD + OrderBook
- ‚ö° **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –Ω–∞ –±–∞–∑–µ asyncio –∏ WebSocket
- üõ°Ô∏è **–°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã** –æ—Ç –ø–µ—Ä–µ—Ç–æ—Ä–≥–æ–≤–∫–∏ –∏ –ø–ª–æ—Ö–∏—Ö —Å–¥–µ–ª–æ–∫

### üß† Intelligent Trading
- **MACD Technical Analysis** —Å histogram –∞–Ω–∞–ª–∏–∑–æ–º
- **OrderBook Intelligence** - –∞–Ω–∞–ª–∏–∑ —Å–ø—Ä–µ–¥–∞, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∏/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è
- **Smart Order Modifications** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π
- **Signal Confidence Scoring** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

### ‚ö° Performance & Reliability
- **Async Architecture** –Ω–∞ –±–∞–∑–µ asyncio –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- **WebSocket Integration** —á–µ—Ä–µ–∑ ccxt.pro –¥–ª—è real-time –¥–∞–Ω–Ω—ã—Ö
```
3. **–°–ª–µ–¥—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ DDD.** –ë–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ `domain/`, –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ `application/`, —Ä–∞–±–æ—Ç—É —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–π—Ç–µ –≤ `infrastructure/`.
4. **–ü–∏—à–∏—Ç–µ docstring‚Äô–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø–∏–∑–∞—Ü–∏—é.** –ö–æ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω –ø–æ PEP8 –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç typing.
5. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –∫–æ–º–∞–Ω–¥–æ–π:
```bash
pip install -r requirements.txt
```
6. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤** ‚Äì –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã:
```bash
pytest
```
7. **–ö–æ–º–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º–∏ –∏ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## üèóÔ∏è –†–∞–±–æ—Ç–∞ —Å MemoryFirst –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π v2.5.0

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–π—Ç–µ —á–µ—Ä–µ–∑ IDealsRepository, IOrdersRepository
2. **–ù–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª—é:** –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ fallback:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å in_memory_legacy —Ä–µ–∂–∏–º–æ–º
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –í—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 1ms

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
```bash
# –¢–µ—Å—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
pytest tests/test_memory_first_architecture.py -v

# –¢–µ—Å—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤  
pytest tests/ -k "memory_first" -v

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/test_integration.py -v
```

### PostgreSQL Guidelines:
1. **–°—Ö–µ–º—ã –≤ src/infrastructure/database/schemas/** - –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ
2. **–ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–æ–¥** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π
3. **Fallback –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ PostgreSQL
4. **JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ default=str –¥–ª—è datetime –æ–±—ä–µ–∫—Ç–æ–≤

### –†–∞–±–æ—Ç–∞ —Å RepositoryFactory:
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RepositoryFactory –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –§–∞–±—Ä–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –Ω—É–∂–Ω—ã–π backend –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ PostgreSQL
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ MemoryFirst —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –û–±—Ö–æ–¥–∏—Ç —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- –£—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:
**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```
"deals_type": "memory_first_postgres"
"orders_type": "memory_first_postgres"
```

**–û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–µ (–ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö):**
```
"deals_type": "in_memory_legacy"  
"orders_type": "in_memory_legacy"
```

–°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º –ø–æ–º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.
