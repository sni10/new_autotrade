# üõ°Ô∏è AutoTrade v3.0: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ú–∏–≥—Ä–∞—Ü–∏–∏

**–í–µ—Ä—Å–∏—è:** 1.0 (–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ INFRASTRUCTURE_MIGRATION_PLAN_V2.md)  
**–°—Ç–∞—Ç—É—Å:** –ù–∞–¥–µ–∂–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è  
**–ü—Ä–∏–Ω—Ü–∏–ø:** "–ù–ï –°–õ–û–ú–ê–ô –ù–ò–•–£–Ø"  

---

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:
> **–ú–µ–Ω—è–µ–º –ü–û –û–î–ù–û–ô –°–¢–†–û–ö–ï –ö–û–î–ê –∑–∞ —Ä–∞–∑. –¢–µ—Å—Ç–∏—Ä—É–µ–º. –ï—Å–ª–∏ —Å–ª–æ–º–∞–ª–æ—Å—å - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∑–∞ 30 —Å–µ–∫—É–Ω–¥.**

### –ì–∞—Ä–∞–Ω—Ç–∏–∏:
- ‚úÖ **–¢–æ—Ä–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è** - —Ç–æ—Ç –∂–µ API, —Ç–µ –∂–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ **–ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –∑–∞ 30 —Å–µ–∫—É–Ω–¥** - —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞  
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞** - –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Fallback —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** - —Å—Ç–∞—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤

---

## üß± –°—Ç—Ä–∞—Ç–µ–≥–∏—è "–û–¥–∏–Ω –ö–∏—Ä–ø–∏—á–∏–∫ - –û–¥–∏–Ω –¢–µ—Å—Ç"

### **–≠–¢–ê–ü 1: DealService (5 –º–∏–Ω—É—Ç)**

#### **–ß—Ç–æ –º–µ–Ω—è–µ–º:**
**–§–∞–π–ª:** `src/domain/services/deals/deal_service.py`
```python
# –ë–´–õ–û:
def __init__(self, deals_repo: InMemoryDealsRepository, order_service, deal_factory, exchange_connector):

# –°–¢–ê–õ–û:  
def __init__(self, deals_repo: IDealsRepository, order_service, deal_factory, exchange_connector):
```

**–ò–ó–ú–ï–ù–ò–õ–ò:** 1 —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞. –ë–æ–ª—å—à–µ –ù–ò–ß–ï–ì–û.

#### **–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
```python
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É –≤ sandbox
# –ü—Ä–æ–≤–µ—Ä—è–µ–º:
deal = Deal("ETH/USDT")
saved_deal = await deal_service.create_new_deal(deal)
assert saved_deal.id is not None  # –°–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å

deals = await deal_service.get_open_deals()
assert len(deals) >= 0  # –ß–∏—Ç–∞–µ—Ç—Å—è

print("‚úÖ DealService —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º")
```

#### **–û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —Å–ª–æ–º–∞–ª–æ—Å—å):**
```python
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º:
def __init__(self, deals_repo: InMemoryDealsRepository, ...):
```

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ main.py:**
```python
# –î–û–ë–ê–í–õ–Ø–ï–ú (—Å—Ç–∞—Ä–æ–µ –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º):
deals_repo = await repository_factory.get_deals_repository()
# deals_repo = InMemoryDealsRepository()  # ‚Üê FALLBACK

deal_service = DealService(deals_repo, order_service, deal_factory, pro_exchange_connector_sandbox)
```

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ fallback –≤ config.json:**
```json
{
  "storage": {
    "deals_type": "memory_first_postgres"
    // "deals_type": "in_memory_legacy"  ‚Üê –û–¢–ö–ê–¢ –ß–ï–†–ï–ó –ö–û–ù–§–ò–ì
  }
}
```

---

### **–≠–¢–ê–ü 2: OrderService (5 –º–∏–Ω—É—Ç)**

**–¢–û–õ–¨–ö–û –ü–û–°–õ–ï** —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è DealService!

#### **–ß—Ç–æ –º–µ–Ω—è–µ–º:**
**–§–∞–π–ª:** `src/domain/services/orders/order_service.py`
```python
# –ë–´–õ–û:
def __init__(self, orders_repo: InMemoryOrdersRepository, ...):

# –°–¢–ê–õ–û:
def __init__(self, orders_repo: IOrdersRepository, ...):
```

#### **–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
```python
# –°–æ–∑–¥–∞–µ–º –æ—Ä–¥–µ—Ä
order = Order("ETH/USDT", "BUY", 0.1, 3000)
saved_order = await order_service.create_and_place_buy_order(currency_pair, 25.0)
assert saved_order.id is not None

# –ß–∏—Ç–∞–µ–º –æ—Ä–¥–µ—Ä–∞
orders = await order_service.get_open_orders()
assert isinstance(orders, list)

print("‚úÖ OrderService —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º")
```

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ main.py:**
```python
orders_repo = await repository_factory.get_orders_repository()
# orders_repo = InMemoryOrdersRepository(max_orders=50000)  # ‚Üê FALLBACK

order_service = OrderService(orders_repo, order_factory, pro_exchange_connector_sandbox, symbol_ccxt)
```

---

### **–≠–¢–ê–ü 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –¢–µ—Å—Ç (10 –º–∏–Ω—É—Ç)**

**–¢–û–õ–¨–ö–û –ü–û–°–õ–ï** —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤!

#### **–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–¥–µ–ª–∫–∏:**
```python
async def test_full_deal_cycle():
    """–¢–µ—Å—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ BUY –æ—Ä–¥–µ—Ä–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è."""
    
    # 1. –°–æ–∑–¥–∞–µ–º –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É
    currency_pair = CurrencyPair("ETH/USDT", "ETH", "USDT", 25.0)
    
    # 2. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Å–¥–µ–ª–∫—É
    deal = await deal_service.create_new_deal(currency_pair, 25.0)
    assert deal.id is not None
    print(f"‚úÖ –°–¥–µ–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: {deal.id}")
    
    # 3. –°–æ–∑–¥–∞–µ–º BUY –æ—Ä–¥–µ—Ä
    buy_order = await order_service.create_and_place_buy_order(currency_pair, 25.0)
    assert buy_order.id is not None
    print(f"‚úÖ BUY –æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω: {buy_order.id}")
    
    # 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤—è–∑—å
    deal.buy_order = buy_order
    updated_deal = await deal_service.deals_repo.save(deal)
    assert updated_deal.buy_order.id == buy_order.id
    print(f"‚úÖ –°–≤—è–∑—å —Å–¥–µ–ª–∫–∞-–æ—Ä–¥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç")
    
    # 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–µ–Ω–∏–µ
    open_deals = await deal_service.get_open_deals()
    deal_ids = [d.id for d in open_deals]
    assert deal.id in deal_ids
    print(f"‚úÖ –ß—Ç–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç")
    
    print("üéâ –ü–û–õ–ù–´–ô –¶–ò–ö–õ –°–î–ï–õ–ö–ò –†–ê–ë–û–¢–ê–ï–¢!")

# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
await test_full_deal_cycle()
```

---

## üö® –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –û—Ç–∫–∞—Ç–∞

### **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:**

#### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ (30 —Å–µ–∫—É–Ω–¥)**
```json
// config.json
{
  "storage": {
    "deals_type": "in_memory_legacy",      // ‚Üê –û—Ç–∫–∞—Ç DealService
    "orders_type": "in_memory_legacy"      // ‚Üê –û—Ç–∫–∞—Ç OrderService
  }
}
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É.** –§–∞–±—Ä–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Å—Ç–∞—Ä—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

#### **–í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ –∫–æ–¥ (1 –º–∏–Ω—É—Ç–∞)**
```python
// main.py
// –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏:
deals_repo = InMemoryDealsRepository()                    // ‚Üê –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
orders_repo = InMemoryOrdersRepository(max_orders=50000)  // ‚Üê –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

// –ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ:
// deals_repo = await repository_factory.get_deals_repository()   // ‚Üê –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
// orders_repo = await repository_factory.get_orders_repository() // ‚Üê –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

#### **–í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–∫–∞—Ç –∫–æ–¥–∞ (2 –º–∏–Ω—É—Ç—ã)**
```python
// src/domain/services/deals/deal_service.py
def __init__(self, deals_repo: InMemoryDealsRepository, ...):  // ‚Üê –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–∏–ø

// src/domain/services/orders/order_service.py  
def __init__(self, orders_repo: InMemoryOrdersRepository, ...): // ‚Üê –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–∏–ø
```

---

## üîí –ì–∞—Ä–∞–Ω—Ç–∏–∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **1. API –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è**
```python
// –î–û –º–∏–≥—Ä–∞—Ü–∏–∏:
await deal_service.create_new_deal(currency_pair, 25.0)
await deal_service.get_open_deals()
await order_service.create_and_place_buy_order(currency_pair, 25.0)

// –ü–û–°–õ–ï –º–∏–≥—Ä–∞—Ü–∏–∏:
await deal_service.create_new_deal(currency_pair, 25.0)  // ‚Üê –¢–û–¢ –ñ–ï –ö–û–î
await deal_service.get_open_deals()                      // ‚Üê –¢–û–¢ –ñ–ï –ö–û–î  
await order_service.create_and_place_buy_order(currency_pair, 25.0)  // ‚Üê –¢–û–¢ –ñ–ï –ö–û–î
```

### **2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –º–µ–Ω—è—é—Ç—Å—è**
```python
// –î–û: 
deals: List[Deal] = await deal_service.get_open_deals()

// –ü–û–°–õ–ï:
deals: List[Deal] = await deal_service.get_open_deals()  // ‚Üê –¢–û–¢ –ñ–ï –¢–ò–ü
```

### **3. –¢–æ—Ä–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è**
- **run_realtime_trading.py** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **BuyOrderMonitor** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
- **DealCompletionMonitor** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **OrderExecutionService** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ú–µ–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ì–î–ï –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è. –ö–ê–ö –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.**

---

## üìä –ß–µ–∫-–ª–∏—Å—Ç –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –ú–∏–≥—Ä–∞—Ü–∏–∏

### **–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:**
- [ ] Backup –≤—Å–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã
- [ ] PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –§–∞–±—Ä–∏–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å fallback'–∞–º–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

### **–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 1 (DealService):**
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–¥–µ–ª–∫—É
- [ ] –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫  
- [ ] PostgreSQL —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø–∏—Å–∏ –æ —Å–¥–µ–ª–∫–∞—Ö
- [ ] –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–µ —É—Ö—É–¥—à–∏–ª–æ—Å—å

### **–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 2 (OrderService):**
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –æ—Ä–¥–µ—Ä
- [ ] –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
- [ ] PostgreSQL —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø–∏—Å–∏ –æ–± –æ—Ä–¥–µ—Ä–∞—Ö
- [ ] –°–≤—è–∑–∏ —Å–¥–µ–ª–∫–∞-–æ—Ä–¥–µ—Ä —Ä–∞–±–æ—Ç–∞—é—Ç

### **–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 3 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è):**
- [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–¥–µ–ª–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–æ—Ä–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è  
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è
- [ ] Graceful shutdown —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –£—Å–ø–µ—Ö–∞

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞ —Ç–æ –∂–µ –≤—Ä–µ–º—è
- ‚úÖ –¢–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ —Ç–æ –∂–µ –≤—Ä–µ–º—è
- ‚úÖ –ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—Ö –∂–µ –ø—Ä–µ–¥–µ–ª–∞—Ö  
- ‚úÖ PostgreSQL –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ:**
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –û—Ç–∫–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ –∑–∞—è–≤–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è

---

## üö´ –ö—Ä–∞—Å–Ω—ã–µ –§–ª–∞–≥–∏ (–°–¢–û–ü-—Å–∏–≥–Ω–∞–ª—ã)

### **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –µ—Å–ª–∏:**
- ‚ùå –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–¥–µ–ª–∫–∏ > 100ms (–±—ã–ª–æ ~1ms)
- ‚ùå –í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫ > 50ms (–±—ã–ª–æ ~1ms)  
- ‚ùå –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤—ã—Ä–æ—Å–ª–æ > 2x
- ‚ùå –í –ª–æ–≥–∞—Ö PostgreSQL connection errors
- ‚ùå –¢–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª –∑–∞–≤–∏—Å–∞–µ—Ç > 5 —Å–µ–∫—É–Ω–¥
- ‚ùå –õ—é–±–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ

### **–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –°–¢–û–ü:**
1. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ—Ä–≥–æ–≤–ª—é** (Ctrl+C)
2. **–ú–µ–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥** –Ω–∞ `"in_memory_legacy"`  
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É**
4. **–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–æ—Ä–≥–æ–≤–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç**
5. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–±–ª–µ–º—É –≤ —Å–ø–æ–∫–æ–π–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ**

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ.

### **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- üß± **–ü–æ –æ–¥–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É** - –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤
- üîí **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å** - –æ—Ç–∫–∞—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç  
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞** - –Ω–∏–∫–∞–∫–∏—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤
- ‚ö° **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–ª—É—á–∞–µ–º **–Ω–∞–¥–µ–∂–Ω—É—é –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–æ—â–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ DataFrame.

**–ï—Å–ª–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫ - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –∏ –æ—Å—Ç–∞–µ–º—Å—è —Å —Ä–∞–±–æ—á–µ–π —Å–∏—Å—Ç–µ–º–æ–π.**